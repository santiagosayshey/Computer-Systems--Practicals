// Calculates a = x*y
// a is a local variable
// x & y are static variables

// Put your code here.

label INIT
    // init a to 0
    push constant 0
    pop local 0

    // init counter to 0
    push constant 0
    pop temp 0

    // get smaller number
    push static 0
    push static 1
    lt
    if-goto X_SMALLER
    goto Y_SMALLER

label Y_SMALLER
    push static 1
    pop temp 2
    push static 0
    pop temp 1

label X_SMALLER
    push static 0
    pop temp 2
    push static 1
    pop temp 1

label SIGN_1
    push temp 1
    push constant 0
    lt
    if-goto FLIP_1

label SIGN_2
    push temp 2
    push constant 0
    lt
    if-goto FLIP_2
    goto CHECK_COUNTER

label FLIP_1
    push temp 1
    neg
    pop temp 1
    push constant 1
    neg
    pop temp 3
    goto SIGN_2

label FLIP_2
    push temp 2
    neg
    pop temp 2
    push constant 1
    neg
    pop temp 4

label CHECK_COUNTER
    push temp 0
    push temp 2
    lt
    if-goto ADD
    goto FLIP_ANSWER

label ADD
    push local 0
    push temp 1
    add
    pop local 0

    push temp 0
    push constant 1
    add
    pop temp 0
    goto CHECK_COUNTER

label FLIP_ANSWER
    push temp 3
    push temp 4
    and
    if-goto END
    push temp 3
    push temp 4
    or
    if-goto NEGATIVE

    goto END

label NEGATIVE
    push local 0
    neg
    pop local 0

label END
    goto END

