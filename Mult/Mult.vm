// Calculates a = x*y
// a is a local variable
// x & y are static variables


// Put your code here.

label INIT
    // init a to 0
    push constant 0
    pop local 0

    // init counter to 0
    push constant 0
    pop temp 0

    push static 0
    pop temp 3
    push static 1
    pop temp 4

    push temp 3
    push constant 0
    lt
    if-goto FLIP_X
    goto CHECK_Y

label CHECK_Y
    push temp 4
    push constant 0
    lt
    if-goto FLIP_Y
    goto STORE_SMALLER

label FLIP_X
    push temp 3
    neg
    pop temp 3
    goto CHECK_Y

label FLIP_Y
    push temp 4
    neg
    pop temp 4
    goto STORE_SMALLER

label STORE_SMALLER
    push temp 4
    push temp 3
    lt
    if-goto Y_SMALLER
    goto CHECK_COUNTER

label Y_SMALLER
    push temp 3
    pop temp 5
    push temp 4
    pop temp 3
    push temp 5
    pop temp 4

label CHECK_COUNTER
    // check if 
    push temp 0
    push temp 3
    lt
    if-goto ADD
    goto SIGN_FLIP

label ADD
    // add x to a
    push local 0
    push temp 4
    add
    pop local 0

    // increment counter by 1
    push constant 1
    push temp 0
    add
    pop temp 0
    goto CHECK_COUNTER


label SIGN_FLIP
    push temp 1
    push temp 2
    and
    if-goto END

    push temp 1
    push temp 2
    or
    if-goto ONE_NEGATIVE

    goto END
label ONE_NEGATIVE
    push local 0
    neg
    pop local 0

label END
    goto END